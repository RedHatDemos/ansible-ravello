name: myapp
design:
  - name: server1
    hostnames:
    - server1-REPL.rhpds.opentlc.com
    - server1.example.com
    baseVmId: 75555386
    bootOrder:
    - CDROM
    - DISK
    # Only add extra disks index 0 is reserved for OS Baseline
    hardDrives:
    - boot: false
      controller: virtio
      #controllerIndex: 1
      index: 1
      name: vol
      size:
        unit: GB
        value: 10
      type: DISK
    numCpus: 1
    memorySize:
      unit: GB
      value: 4
    networkConnections:
    - name: eth0
      accessPort: true
      device:
        deviceType: virtio
        index: 0
        useAutomaticMac: true
      ipConfig:
        autoIpConfig:
          reservedIp: 192.168.1.10
        externalAccessState: CONDITIONAL_PUBLIC_IP
        hasPublicIp: true
        needElasticIp: false
    powerOffOnStopTimeOut: true
    stopTimeOut: '300'
    suppliedServices:
    - external: true
      ip: 192.168.1.10
      name: ssh
      portRange: '22'
      protocol: SSH
    supportsCloudInit: true
    keypairName: opentlc-admin-backdoor
  - name: server3
    hostnames:
    - server3.example.com
    allowNested: true
    baseVmId: 75555386
    memorySize:
      unit: GB
      value: 4
    numCpus: 2
    networkConnections:
    - name: eth0
      accessPort: true
      device:
        deviceType: virtio
        index: 0
        pciSlot: 1
        useAutomaticMac: true
      ipConfig:
        autoIpConfig:
          reservedIp: 192.168.1.30
        externalAccessState: CONDITIONAL_PUBLIC_IP
        hasPublicIp: false
        needElasticIp: false
    - name: eth1
      accessPort: true
      device:
        deviceType: virtio
        index: 1
        mac: 2c:c2:60:2e:fd:69
        useAutomaticMac: false
      ipConfig:
        externalAccessState: CONDITIONAL_PUBLIC_IP
        hasPublicIp: false
        needElasticIp: false
        staticIpConfig:
          ip: 192.168.2.30
          mask: 255.255.255.0
    powerOffOnStopTimeOut: true
    stopTimeOut: '300'
    supportsCloudInit: false
  - name: server2
    hostnames:
    - server2.example.com
    allowNested: true
    baseVmId: 75555386
    description: ':nohbac:'
    bootOrder:
    - CDROM
    - DISK
    memorySize:
      unit: GB
      value: 4
    numCpus: 1
    networkConnections:
    - name: eth0
      accessPort: true
      device:
        deviceType: virtio
        index: 0
        useAutomaticMac: true
      ipConfig:
        autoIpConfig:
          reservedIp: 192.168.1.20
        externalAccessState: CONDITIONAL_PUBLIC_IP
        hasPublicIp: true
    - name: eth1
      accessPort: true
      device:
        deviceType: virtio
        index: 1
        useAutomaticMac: true
      ipConfig:
        externalAccessState: CONDITIONAL_PUBLIC_IP
        hasPublicIp: false
        needElasticIp: false
        staticIpConfig:
          ip: 192.168.2.20
          mask: 255.255.255.0
    powerOffOnStopTimeOut: true
    stopTimeOut: '300'
    requiresKeypair: false
    suppliedServices:
    - name: http
      external: true
      portRange: '443'
      protocol: HTTPS
      ip: 192.168.1.20
    - name: https
      external: true
      portRange: '80'
      protocol: HTTP
      ip: 192.168.1.20
    supportsCloudInit: false
